{"info":{"description":"API for PrskLab - Project SEKAI related web application","title":"PrskLab API","version":"1.0.0"},"openapi":"3.0.0","servers":[{"description":"Local development server","url":"http://localhost:30000"}],"tags":[{"description":"Character and unit information","name":"Characters"},{"description":"Furniture and reaction information","name":"Furnitures"},{"description":"Reaction check management","name":"Reactions"},{"description":"User settings management","name":"Settings"},{"description":"Unit information","name":"Units"},{"description":"User management endpoints","name":"Users"}],"components":{"securitySchemes":{"bearerAuth":{"bearerFormat":"JWT","description":"NextAuth session token","scheme":"bearer","type":"http"},"discordAuth":{"description":"Discord OAuth token","in":"header","name":"X-Discord-Token","type":"apiKey"}},"schemas":{},"parameters":{}},"paths":{"/api/users/me":{"get":{"description":"Get the currently authenticated user's information","security":[{"bearerAuth":[]}],"summary":"Get current user","tags":["Users"],"responses":{"200":{"description":"User found","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"},"success":{"type":"boolean"},"data":{"type":"object","properties":{"avatarUrl":{"type":"string","nullable":true},"discordId":{"type":"string"},"email":{"type":"string","nullable":true},"id":{"type":"string"},"name":{"type":"string","nullable":true},"role":{"type":"string","enum":["Admin","Editor","Viewer"]}},"required":["avatarUrl","discordId","email","id","name","role"]}},"required":["message","success"]}}}},"401":{"description":"Unauthorized - Authentication required"},"404":{"description":"Not found"}}}},"/api/users":{"post":{"description":"Register a new user with Discord OAuth","security":[{"discordAuth":[]}],"summary":"Create a new user","tags":["Users"],"responses":{"201":{"description":"User created successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"},"success":{"type":"boolean"},"data":{"type":"object","properties":{"avatarUrl":{"type":"string","nullable":true},"discordId":{"type":"string"},"email":{"type":"string","nullable":true},"id":{"type":"string"},"name":{"type":"string","nullable":true},"role":{"type":"string","enum":["Admin","Editor","Viewer"]}},"required":["avatarUrl","discordId","email","id","name","role"]}},"required":["message","success"]}}}},"400":{"description":"Bad request - Invalid input data"},"401":{"description":"Unauthorized - Authentication required"},"409":{"description":"Conflict - Resource already exists"}}}},"/api/users/settings":{"get":{"description":"Get the current user's settings","security":[{"bearerAuth":[]}],"summary":"Get user settings","tags":["Settings"],"responses":{"200":{"description":"Settings found","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"},"success":{"type":"boolean"},"data":{"type":"object","properties":{"isRegistered":{"type":"boolean"},"leaderSheetUrl":{"type":"string","nullable":true}},"required":["isRegistered","leaderSheetUrl"]}},"required":["message","success"]}}}},"401":{"description":"Unauthorized - Authentication required"},"404":{"description":"Not found"}}},"post":{"description":"Create new settings for the current user","security":[{"bearerAuth":[]}],"summary":"Create user settings","tags":["Settings"],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"leaderSheetUrl":{"type":"string","nullable":true}},"required":["leaderSheetUrl"]}}}},"responses":{"201":{"description":"Settings created successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"},"success":{"type":"boolean"},"data":{"type":"object","properties":{"isRegistered":{"type":"boolean"},"leaderSheetUrl":{"type":"string","nullable":true}},"required":["isRegistered","leaderSheetUrl"]}},"required":["message","success"]}}}},"400":{"description":"Bad request - Invalid input data"},"401":{"description":"Unauthorized - Authentication required"},"409":{"description":"Conflict - Resource already exists"}}},"patch":{"description":"Update the current user's settings","security":[{"bearerAuth":[]}],"summary":"Update user settings","tags":["Settings"],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"leaderSheetUrl":{"type":"string","nullable":true}},"required":["leaderSheetUrl"]}}}},"responses":{"200":{"description":"Settings updated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"},"success":{"type":"boolean"},"data":{"type":"object","properties":{"isRegistered":{"type":"boolean"},"leaderSheetUrl":{"type":"string","nullable":true}},"required":["isRegistered","leaderSheetUrl"]}},"required":["message","success"]}}}},"400":{"description":"Bad request - Invalid input data"},"401":{"description":"Unauthorized - Authentication required"},"404":{"description":"Not found"}}}},"/api/characters":{"get":{"description":"Retrieve all characters with their unit information","summary":"Get all characters","tags":["Characters"],"responses":{"200":{"description":"Characters retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"},"success":{"type":"boolean"},"data":{"type":"object","properties":{"characters":{"type":"array","items":{"type":"object","properties":{"avatarUrl":{"type":"string","nullable":true},"bgColor":{"type":"string"},"code":{"type":"string"},"color":{"type":"string"},"isVirtualSinger":{"type":"boolean"},"name":{"type":"string"},"short":{"type":"string"},"unit":{"type":"object","nullable":true,"properties":{"bgColor":{"type":"string"},"code":{"type":"string"},"color":{"type":"string"},"name":{"type":"string"},"short":{"type":"string"}},"required":["bgColor","code","color","name","short"]}},"required":["avatarUrl","bgColor","code","color","isVirtualSinger","name","short","unit"]}}},"required":["characters"]}},"required":["message","success"]}}}},"500":{"description":"Internal server error"}}}},"/api/units":{"get":{"description":"Retrieve all units","summary":"Get all units","tags":["Units"],"responses":{"200":{"description":"Units retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"},"success":{"type":"boolean"},"data":{"type":"object","properties":{"units":{"type":"array","items":{"type":"object","properties":{"bgColor":{"type":"string"},"code":{"type":"string"},"color":{"type":"string"},"name":{"type":"string"},"short":{"type":"string"}},"required":["bgColor","code","color","name","short"]}}},"required":["units"]}},"required":["message","success"]}}}},"500":{"description":"Internal server error"}}}},"/api/furnitures":{"get":{"description":"Retrieve all furnitures with ownership status for the current user","security":[{"bearerAuth":[]}],"summary":"Get all furnitures with ownership status","tags":["Furnitures"],"parameters":[{"schema":{"type":"string","description":"Search query for furniture name (partial match)","example":"ソファ"},"required":false,"description":"Search query for furniture name (partial match)","name":"q","in":"query"}],"responses":{"200":{"description":"Furnitures retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"data":{"type":"object","properties":{"tags":{"type":"array","items":{"type":"object","properties":{"furnitures":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"owned":{"type":"boolean"}},"required":["id","name","owned"]}},"id":{"type":"string"},"name":{"type":"string"}},"required":["furnitures","id","name"]}}},"required":["tags"]},"message":{"type":"string"},"success":{"type":"boolean"}},"required":["data","message","success"]}}}},"401":{"description":"Unauthorized - Authentication required"},"500":{"description":"Internal server error"}}}},"/api/furnitures/{unitCode}":{"get":{"description":"Retrieve furniture list with reactions for a specific unit","security":[{"bearerAuth":[]}],"summary":"Get furnitures by unit","tags":["Furnitures"],"parameters":[{"schema":{"type":"string","description":"Unit code (e.g., leoneed, mmj, vbs, ws, oclock)","example":"leoneed"},"required":true,"description":"Unit code (e.g., leoneed, mmj, vbs, ws, oclock)","name":"unitCode","in":"path"},{"schema":{"type":"string","description":"Comma-separated character IDs to filter reactions","example":"char-id-1,char-id-2"},"required":false,"description":"Comma-separated character IDs to filter reactions","name":"characterIds","in":"query"},{"schema":{"type":"string","description":"Hide tags where all reactions are checked (true/false)","example":"true"},"required":false,"description":"Hide tags where all reactions are checked (true/false)","name":"hideCompleted","in":"query"},{"schema":{"type":"string","description":"Show only owned furniture (true/false)","example":"true"},"required":false,"description":"Show only owned furniture (true/false)","name":"ownedOnly","in":"query"},{"schema":{"type":"string","description":"Search query for furniture name (partial match)","example":"ソファ"},"required":false,"description":"Search query for furniture name (partial match)","name":"q","in":"query"}],"responses":{"200":{"description":"Furnitures retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"data":{"type":"object","properties":{"tags":{"type":"array","items":{"type":"object","properties":{"furnitures":{"type":"array","items":{"type":"object","properties":{"groupId":{"type":"string","nullable":true},"id":{"type":"string"},"name":{"type":"string"},"reactions":{"type":"array","items":{"type":"object","properties":{"characters":{"type":"array","items":{"type":"object","properties":{"color":{"type":"string"},"id":{"type":"string"},"short":{"type":"string"}},"required":["color","id","short"]}},"checked":{"type":"boolean"},"checkedByGroup":{"type":"boolean"},"id":{"type":"string"}},"required":["characters","checked","checkedByGroup","id"]}}},"required":["groupId","id","name","reactions"]}},"id":{"type":"string"},"name":{"type":"string"}},"required":["furnitures","id","name"]}},"unitCode":{"type":"string"},"unitName":{"type":"string"}},"required":["tags","unitCode","unitName"]},"message":{"type":"string"},"success":{"type":"boolean"}},"required":["data","message","success"]}}}},"401":{"description":"Unauthorized - Authentication required"},"404":{"description":"Not found"},"500":{"description":"Internal server error"}}}},"/api/furnitures/own/{furnitureId}":{"post":{"description":"Mark a furniture as owned by the current user","security":[{"bearerAuth":[]}],"summary":"Own a furniture","tags":["Furnitures"],"parameters":[{"schema":{"type":"string","description":"Furniture ID","example":"clxxxxx"},"required":true,"description":"Furniture ID","name":"furnitureId","in":"path"}],"responses":{"200":{"description":"Furniture marked as owned","content":{"application/json":{"schema":{"type":"object","properties":{"data":{"type":"object","properties":{"furnitureId":{"type":"string"},"owned":{"type":"boolean"}},"required":["furnitureId","owned"]},"message":{"type":"string"},"success":{"type":"boolean"}},"required":["data","message","success"]}}}},"401":{"description":"Unauthorized - Authentication required"},"404":{"description":"Not found"},"500":{"description":"Internal server error"}}},"delete":{"description":"Remove ownership of a furniture for the current user","security":[{"bearerAuth":[]}],"summary":"Unown a furniture","tags":["Furnitures"],"parameters":[{"schema":{"type":"string","description":"Furniture ID","example":"clxxxxx"},"required":true,"description":"Furniture ID","name":"furnitureId","in":"path"}],"responses":{"200":{"description":"Furniture ownership removed","content":{"application/json":{"schema":{"type":"object","properties":{"data":{"type":"object","properties":{"furnitureId":{"type":"string"},"owned":{"type":"boolean"}},"required":["furnitureId","owned"]},"message":{"type":"string"},"success":{"type":"boolean"}},"required":["data","message","success"]}}}},"401":{"description":"Unauthorized - Authentication required"},"404":{"description":"Not found"},"500":{"description":"Internal server error"}}}},"/api/reactions/{reactionId}/check":{"post":{"description":"Mark a reaction as checked for the current user","security":[{"bearerAuth":[]}],"summary":"Check a reaction","tags":["Reactions"],"parameters":[{"schema":{"type":"string","description":"Reaction ID","example":"clxxxxx"},"required":true,"description":"Reaction ID","name":"reactionId","in":"path"}],"responses":{"200":{"description":"Reaction checked successfully","content":{"application/json":{"schema":{"type":"object","properties":{"data":{"type":"object","properties":{"checked":{"type":"boolean"},"reactionId":{"type":"string"}},"required":["checked","reactionId"]},"message":{"type":"string"},"success":{"type":"boolean"}},"required":["data","message","success"]}}}},"401":{"description":"Unauthorized - Authentication required"},"404":{"description":"Not found"},"500":{"description":"Internal server error"}}},"delete":{"description":"Remove check from a reaction for the current user","security":[{"bearerAuth":[]}],"summary":"Uncheck a reaction","tags":["Reactions"],"parameters":[{"schema":{"type":"string","description":"Reaction ID","example":"clxxxxx"},"required":true,"description":"Reaction ID","name":"reactionId","in":"path"}],"responses":{"200":{"description":"Reaction unchecked successfully","content":{"application/json":{"schema":{"type":"object","properties":{"data":{"type":"object","properties":{"checked":{"type":"boolean"},"reactionId":{"type":"string"}},"required":["checked","reactionId"]},"message":{"type":"string"},"success":{"type":"boolean"}},"required":["data","message","success"]}}}},"401":{"description":"Unauthorized - Authentication required"},"404":{"description":"Not found"},"500":{"description":"Internal server error"}}}}}}